# cuda最优策略

衡量标准为每个流处理器（SM）的占用率

## 1.共享内存大小

帕斯卡 ( Pascal ) 64k

麦克斯韦尔 ( Maxwell ) 96k

## 2.寄存器个数

cuda中寄存器用于记录核函数使用时的变量个数，单个线程最大为为255.

但是启动的总线程数*变量数不得超过每个块的上限（64k）

## 3.线程/块的大小

线程少块多，线程多块少。每个SM上限32块。

## 4.线程束的个数

每个SM最多64个线程束。衡量占用率的最终决定因素。

## cuda计算原理

![image-20210609141320557](.\图片\gpu架构图.png)

# 暗通道加速项目

难点

## 内存缓存设计和边缘处理。

按照行为单元进行计算。

## bit排序

将任意一个长为2n的双调序列A分为等长的两半X和Y，将X中的元素与Y中的元素一一按原序比较，即a[i]与a[i+n] (i < n)比较，将较大者放入MAX序列，较小者放入MIN序列。则得到的MAX和MIN序列仍然是双调序列，并且MAX序列中的任意一个元素不小于MIN序列中的任意一个元素[2]。

# 立体匹配项目

代价计算

代价聚合

后处理

二次插值，左右一致性检查